{% extends 'InjectionLog/index.html' %}
{% load groupfilter %}
{% block maincontent %}

<main role="main">
  <div class="container">
    {% if not validcats.all %}
    <div class="jumbotron">
      <h2>Getting Started</h2>
      <div class="row">
        <div class="col-xsm-3">
          <img src="https://img.icons8.com/pastel-glyph/64/000000/cat--v1.png"/>
        </div>
        <div class="col">
          <p> You do not currently have any cats linked to your profile.  Please <a href="/catinfo">add a cat</a> to get started.
        </div>
      </div>
    </div>
    {% else %}

    <div class="container">
      <div class="row">You are on {{treatment_duration|duration_days}}</div>
    </div>

    <div class="container mb-3">

      <div class="progress mb-3">
        <div class="progress-bar progress-bar-striped bg-warning" role="progressbar" style="width:{% if relapse %}{{progress.inj_date|duration_progress}}{% else %}{{progress.inj_date|duration_progress:sc.cat_name.extended_treatment}}{% endif %}%" aria-valuenow="{% if relapse %}{{progress.inj_date|duration_progress}}{% else %}{{progress.inj_date|duration_progress:sc.cat_name.extended_treatment}}{% endif %}%" aria-valuemin="0" aria-valuemax="100">{% if relapse %}{{progress.inj_date|duration_progress}}{% else %}{{progress.inj_date|duration_progress:sc.cat_name.extended_treatment}}{% endif %}% of Injections Logged </div>
      </div>
      <div class="progress mb-3">

        <div class="progress-bar bg-success" role="progressbar" style="width: {% if relapse %}{{treatment_duration|duration_progress}}{% else %}{{treatment_duration|duration_progress:sc.cat_name.extended_treatment}}{% endif %}%" aria-valuenow="{% if relapse %}{{treatment_duration|duration_progress}}{% else %}{{treatment_duration|duration_progress:sc.cat_name.extended_treatment}}{% endif %}%" aria-valuemin="0" aria-valuemax="100">{% if relapse %}{{treatment_duration|duration_progress}}{% else %}{{treatment_duration|duration_progress:sc.cat_name.extended_treatment}}{% endif %}% of Days Completed</div>
      </div>

      <form action="/" method="GET">
        <select class="form-control" name="selectedcat" id="slectedcat" onchange="submit();">
        {% for cat in validcats %}
          <option {% if cat.id == sc.cat_name.id %} selected {% endif %}value="{{cat.id}}">{{cat.name}}</option>
        {% endfor %}
        </select>
      </form>
    </div>

    {% if progress.inj_date < treatment_duration %}
      <div class="alert alert-danger">
        <div class="row">
          <div class="col-sm-2">
            <img src="https://img.icons8.com/pastel-glyph/64/000000/cat--v1.png"/>
          </div>
          <div class="col">
            Your log is not up to date.  This data is important to track.  Please <a href="/inject">record treatments</a>
          </div>
        </div>
      </div>
    {% endif %}

    {% if progress.inj_date|duration_progress:sc.cat_name.extended_treatment|add:0 >= 75 and progress.inj_date|duration_progress:sc.cat_name.extended_treatment|add:0 < 100 %}
      <div class="alert alert-warning">
        <div class="row">
          <div class="col-sm-2">
            <img src="https://img.icons8.com/pastel-glyph/64/000000/cat--v1.png"/>
          </div>
          <div class="col">
            You are more than 75% of the way through treatment!!  If you are considering extending the treatment past {% if sc.cat_name.extended_treatment %}{{sc.cat_name.extended_treatment|add:84}}{% else %} 84 {% endif %} days, please update your <a href="/catinfo/?CatID={{sc.cat_name.id}}">cat's profile</a>.
          </div>
        </div>
      </div>
    {% endif %}
    {% if treatment_duration >= 84|add:sc.cat_name.extended_treatment %}
    <div class="alert alert-warning">
      <div class="row">
        <div class="col-sm-2">
          <img src="https://img.icons8.com/pastel-glyph/64/000000/cat--v1.png"/>
        </div>
        <div class="col">
          You are now in the 84 day observation period. If your cat experiences a relapse, please update your <a href="/catinfo/?CatID={{sc.cat_name.id}}">cat's profile</a>.
        </div>
      </div>
    </div>
    {% endif %}

    <div class="jumbotron">



      {% if grouping %}
      <div class="alert alert-warning">
        Member of Group: {{grouping}}
      </div>
      {% endif %}
      <div class="alert alert-primary">
        Please update your <a href="/catinfo/?CatID={{sc.cat_name.id}}">cat's information</a> if a relapse occurs
      </div>
      <div class="card-deck">
        <div class="row">
        {% if treatment_duration >= 84|add:sc.cat_name.extended_treatment %}

        <div class="col-sm-6 mb-3">
          <div class="card bg-light" style="width: 18rem;">
            <div class="card-header">
              <h5 class="card-title">
                <svg class="bi bi-pencil-square" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                  <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                </svg>
                <span>Add Observations</span>
              </h5>
            </div>
            <div class="card-body">

              <p class="card-text">The observation period can be stressful.  It is often useful to record weight and temperature, as well as general daily behaviors so you can see patterns in how your cat is doing.</p>
              <a class="btn btn-success" href="/record_observation" role="button">Record an Observation</a>
            </div>
          </div>
        </div>


          <div class="col-sm-6 mb-3">
            <div class="card bg-light" style="width: 18rem;"">
              <div class="card-header">
                <h5 class="card-title">
                  <svg class="bi bi-calendar3-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2H0z"/>
                    <path fill-rule="evenodd" d="M0 3h16v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm6.5 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-8 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-8 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                  </svg>
                  <span>View Observation Log</span>
                </h5>
              </div>
              <div class="card-body">
                <p class="card-text">See past data so you know how your cat has been doing.</p>
                <a class="btn btn-success" href="/observationlog" role="button">View Observation Log</a>
              </div>
            </div>
          </div>

        {% endif %}
        {% if treatment_duration <= 90|add:sc.cat_name.extended_treatment %}
          <div class="col-sm-6 mb-3">
            <div class="card bg-light" style="width: 18rem;">
              <div class="card-header">
                <h5 class="card-title">
                  <svg class="bi bi-pencil-square" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                    <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                  </svg>
                  <span>Add to Log</span>
                </h5>
              </div>
              <div class="card-body">

                <p class="card-text">Log your medication so you can monitor your cat over time.  Calculator populates with last-used weight and dose information</p>
                <a class="btn btn-success" href="/inject" role="button">Record Medication</a>
              </div>
            </div>
          </div>
          {% endif %}

          <div class="col-sm-6 mb-3">
            <div class="card bg-light" style="width: 18rem;"">
              <div class="card-header">
                <h5 class="card-title">
                  <svg class="bi bi-calendar3-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2H0z"/>
                    <path fill-rule="evenodd" d="M0 3h16v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm6.5 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-8 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-8 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                  </svg>
                  <span>View Treatment Log</span>
                </h5>
              </div>
              <div class="card-body">
                <p class="card-text">See past data so you know how your cat has been doing.</p>
                <a class="btn btn-success" href="/log" role="button">View Treatment Log</a>
              </div>
            </div>
          </div>

          <div class="col-sm-6 mb-3">
            <div class="card bg-light" style="width: 18rem;"">
              <div class="card-header">
                <h5 class=card-title">
                  <svg class="bi bi-gear" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M8.837 1.626c-.246-.835-1.428-.835-1.674 0l-.094.319A1.873 1.873 0 0 1 4.377 3.06l-.292-.16c-.764-.415-1.6.42-1.184 1.185l.159.292a1.873 1.873 0 0 1-1.115 2.692l-.319.094c-.835.246-.835 1.428 0 1.674l.319.094a1.873 1.873 0 0 1 1.115 2.693l-.16.291c-.415.764.42 1.6 1.185 1.184l.292-.159a1.873 1.873 0 0 1 2.692 1.116l.094.318c.246.835 1.428.835 1.674 0l.094-.319a1.873 1.873 0 0 1 2.693-1.115l.291.16c.764.415 1.6-.42 1.184-1.185l-.159-.291a1.873 1.873 0 0 1 1.116-2.693l.318-.094c.835-.246.835-1.428 0-1.674l-.319-.094a1.873 1.873 0 0 1-1.115-2.692l.16-.292c.415-.764-.42-1.6-1.185-1.184l-.291.159A1.873 1.873 0 0 1 8.93 1.945l-.094-.319zm-2.633-.283c.527-1.79 3.065-1.79 3.592 0l.094.319a.873.873 0 0 0 1.255.52l.292-.16c1.64-.892 3.434.901 2.54 2.541l-.159.292a.873.873 0 0 0 .52 1.255l.319.094c1.79.527 1.79 3.065 0 3.592l-.319.094a.873.873 0 0 0-.52 1.255l.16.292c.893 1.64-.902 3.434-2.541 2.54l-.292-.159a.873.873 0 0 0-1.255.52l-.094.319c-.527 1.79-3.065 1.79-3.592 0l-.094-.319a.873.873 0 0 0-1.255-.52l-.292.16c-1.64.893-3.433-.902-2.54-2.541l.159-.292a.873.873 0 0 0-.52-1.255l-.319-.094c-1.79-.527-1.79-3.065 0-3.592l.319-.094a.873.873 0 0 0 .52-1.255l-.16-.292c-.892-1.64.902-3.433 2.541-2.54l.292.159a.873.873 0 0 0 1.255-.52l.094-.319z"/>
                    <path fill-rule="evenodd" d="M8 5.754a2.246 2.246 0 1 0 0 4.492 2.246 2.246 0 0 0 0-4.492zM4.754 8a3.246 3.246 0 1 1 6.492 0 3.246 3.246 0 0 1-6.492 0z"/>
                  </svg>
                  <span>Calculator</span>
                </h5>
              </div>
              <div class="card-body">
                <p class="card-text">Used to determine the volume of GS needed for an injection</p>
                <a class="btn btn-dark" href="/calculate" role="button">Calculate Dose</a>
              </div>
            </div>
          </div>

          <div class="col-sm-6 mb-3">
            <div class="card bg-light" style="width: 18rem;"">
              <div class="card-header">
                <h5 class=card-title">
                  <svg class="bi bi-people" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.995-.944v-.002.002zM7.022 13h7.956a.274.274 0 0 0 .014-.002l.008-.002c-.002-.264-.167-1.03-.76-1.72C13.688 10.629 12.718 10 11 10c-1.717 0-2.687.63-3.24 1.276-.593.69-.759 1.457-.76 1.72a1.05 1.05 0 0 0 .022.004zm7.973.056v-.002.002zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10c-1.668.02-2.615.64-3.16 1.276C1.163 11.97 1 12.739 1 13h3c0-1.045.323-2.086.92-3zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
                  </svg>
                  <span>Track Other Warriors</span>
                </h5>
              </div>
              <div class="card-body">
                <p class="card-text">If another warrior gives you their share link, you can track their cat information and injection log.</p>
                <a class="btn btn-warning" href="/trackwarrior" role="button">Track Others</a>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
{% endif %}
  </div> <!-- /container -->
</main>

{% endblock %}
