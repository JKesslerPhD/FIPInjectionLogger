{% extends 'InjectionLog/index.html' %}
{% load groupfilter %}
{% block maincontent %}
<style>
.modebar{
      display: none !important;
}
</style>
<main role="main">

  <div class="container">
    {% if not validcats.all %}
    <div class="jumbotron">
      <h2>Getting Started</h2>
      <div class="row">
        <div class="col-xsm-3">
          <img src="https://img.icons8.com/pastel-glyph/64/000000/cat--v1.png"/>
        </div>
        <div class="col">
          <p> You do not currently have any cats linked to your profile.  Please <a href="/catinfo">add a cat</a> to get started.
        </div>
      </div>
    </div>
    {% elif user_defined_timezone == False %}
    <div class="alert alert-danger">
      <div class="row">
        <p>Please specify your timezone to continue:</p>
      </div>

        <div class="form-inline">
          <span style="padding:20px;">
            <svg width="4em" height="4em" viewBox="0 0 16 16" class="bi bi-clock-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
            </svg>
          </span>
          <form class="needs-validation" novalidate action="/fix_timezone_error" method="POST" id="set_timezone">
            {% csrf_token %}
            <select required name="user_tz" title="Please Select" class="form-control">
            {% for time in tz_list %}
              <option value="{{time}}" {% if time == tz %}  selected  {% endif %}> {{time}}</option>
            {% endfor %}
            </select>
            <span class="input-group-btn">
              <input class="btn btn-danger" type="submit" value="Set Timezone">
            </span>
          </form>
      </div>
    </div>
    {% else %}
    <div style="position: absolute; opacity: 0; pointer-events:none;">
      <div id="capture">
        <div class="card">
          <div class="card-header">
            <div class="row">
              <div class="col-md-3"><img src="/static/favicon/android-chrome-96x96.png" width=64 height=64 alt=""></div>
              <div class="col"><p class="navbar-brand">FIPLog.com</p></div>

              <div class="col" align="right">
                <svg viewBox="0 0 100 80" width="40" height="40">
                  <rect width="100" height="10"></rect>
                  <rect y="30" width="100" height="10"></rect>
                  <rect y="60" width="100" height="10"></rect>
                </svg>
              </div>
            </div>
          </div>
          <div class="card-body">
          <h5 class="card-title">{{sc.cat_name.name}} {% if sc.cat_name.cured == True %} beat FIP! {% else %} is fighting FIP {% endif %}</h5>
          {% if sc.cat_name.cured != True %}
            We are on {{treatment_duration|duration_days}}
              {% if relapse %} + {{sc.cat_name.treatment_start|date_diff:relapse.relapse_start}} days due to relapse {% endif %}
            {% endif %}

          <div id="badge_progress">
          </div>
            {% if sc.cat_name.cured == True %}
              <div class="alert alert-success">
                <div id="badge_success_div"></div>
                {{sc.cat_name.name}} has been cured for {{treatment_duration|cure_duration}}!
              </div>
            {% endif %}

            <div id="cat_figure" style="position:relatve;">
              {% autoescape off %}
              {{cat_quality}}
              {% endautoescape %}
            </div>
          </div>
          <div class="card-footer">
            <small>We are using FIPLog.com to track treatment</small>
          </div>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="row" style="padding:10px;">
        <div class="col">
            {% if sc.cat_name.cured == True %}
            <p class="text-success">{{sc.cat_name.name}} has been cured for {{treatment_duration|cure_duration}}</p>
            {% endif %}
          You are on {{treatment_duration|duration_days}}
        {% if relapse %} + {{sc.cat_name.treatment_start|date_diff:relapse.relapse_start}} days due to relapse {% endif %}

      </div>
        <div class="col" align="right">
          <button class="btn btn-link" id="download">
          <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-share-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
          </svg>
        <small>Download Sharable Image</small></button>
        </div>
      </div>


    </div>
    <div class="container mb-3">

      <div id="injection_progress" class="progress mb-3">
        <div class="progress-bar progress-bar-striped bg-warning" role="progressbar" style="width:{% if relapse %}{{progress.inj_date|duration_progress}}{% else %}{{progress.inj_date|duration_progress:sc.cat_name.extended_treatment}}{% endif %}%" aria-valuenow="{% if relapse %}{{progress.inj_date|duration_progress}}{% else %}{{progress.inj_date|duration_progress:sc.cat_name.extended_treatment}}{% endif %}%" aria-valuemin="0" aria-valuemax="100">{% if relapse %}{{progress.inj_date|duration_progress}}{% else %}{{progress.inj_date|duration_progress:sc.cat_name.extended_treatment}}{% endif %}% of injections logged</div>
      </div>
      <div id="treatment_progress" class="progress mb-3">

      {% if progress.inj_date > treatment_duration %}

      <div class="progress-bar bg-success" role="progressbar" style="width:{% if relapse %}{{progress.inj_date|duration_progress}}{% else %}{{progress.inj_date|duration_progress:sc.cat_name.extended_treatment}}{% endif %}%" aria-valuenow="{% if relapse %}{{progress.inj_date|duration_progress}}{% else %}{{progress.inj_date|duration_progress:sc.cat_name.extended_treatment}}{% endif %}%" aria-valuemin="0" aria-valuemax="100">{% if relapse %}{{progress.inj_date|duration_progress}}{% else %}{{progress.inj_date|duration_progress:sc.cat_name.extended_treatment}}{% endif %}% of injection days completed</div>


      {% else %}
        <div class="progress-bar bg-success" role="progressbar" style="width: {% if relapse %}{{treatment_duration|duration_progress}}{% else %}{{treatment_duration|duration_progress:sc.cat_name.extended_treatment}}{% endif %}%" aria-valuenow="{% if relapse %}{{treatment_duration|duration_progress}}{% else %}{{treatment_duration|duration_progress:sc.cat_name.extended_treatment}}{% endif %}%" aria-valuemin="0" aria-valuemax="100">{% if relapse %}{{treatment_duration|duration_progress}}{% else %}{{treatment_duration|duration_progress:sc.cat_name.extended_treatment}}{% endif %}% of injection days completed</div>

      {% endif %}
    </div>
      {% if treatment_duration >= 168|add:sc.cat_name.extended_treatment %}
        {% with treatment_duration|add:-83|subtract:sc.cat_name.extended_treatment as treatment_dur %}
      <div class="row">
        <div class="col">
          <div id="observation_progress" class="progress mb-3">
            <div class="progress-bar bg-danger" role="progressbar" style="width:{{treatment_dur|duration_progress}}%" aria-valuenow="{{treatment_dur|duration_progress}}%" aria-valuemin="0" aria-valuemax="100">{{treatment_dur|duration_progress}}% done with observation period</div>
          </div>
        </div>
      </div>
        {% endwith %}
      {% endif %}


      <form action="/" method="GET">
        <select class="form-control" name="selectedcat" id="slectedcat" onchange="submit();">
        {% for cat in validcats %}
          <option {% if cat.id == sc.cat_name.id %} selected {% endif %}value="{{cat.id}}">{{cat.name}}</option>
        {% endfor %}
        </select>
      </form>
    </div>
    {% if progress.inj_date < treatment_duration and treatment_duration <= 84|add:sc.cat_name.extended_treatment %}
      <div class="alert alert-danger">
        <div class="row">
          <div class="col-sm-2">
            <img src="https://img.icons8.com/pastel-glyph/64/000000/cat--v1.png"/>
          </div>
          <div class="col">
            Your log is not up to date.  This data is important to track.  Please <a href="/inject">record treatments</a>
          </div>
        </div>
      </div>
    {% endif %}
    {% if treatment_duration|duration_progress:sc.cat_name.extended_treatment|add:0 >= 75 and treatment_duration|duration_progress:sc.cat_name.extended_treatment|add:0 < 100 and not relapse %}
      <div class="alert alert-warning">
        <div class="row">
          <div class="col-sm-2">
            <img src="https://img.icons8.com/pastel-glyph/64/000000/cat--v1.png"/>
          </div>
          <div class="col">
            You are more than 75% of the way through treatment!!  If you are considering extending the treatment past {% if sc.cat_name.extended_treatment %}{{sc.cat_name.extended_treatment|add:84}}{% else %} 84 {% endif %} days, please update your <a href="/catinfo/?CatID={{sc.cat_name.id}}">cat's profile</a>.
          </div>
        </div>
      </div>
    {% endif %}


    {% if treatment_duration >= 168|add:sc.cat_name.extended_treatment %}
      {% if sc.cat_name.cured == True %}
      <div class="alert alert-success">
        <div class="row">
          <div id="success" class="col-sm-2">
            <svg width="5em" height="5em" version="1.0" xmlns="http://www.w3.org/2000/svg"
             width="1254.000000pt" height="1280.000000pt" viewBox="0 0 1254.000000 1280.000000"
             preserveAspectRatio="xMidYMid meet">
            <metadata>
            Created by potrace 1.15, written by Peter Selinger 2001-2017
            </metadata>
            <g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)"
            fill="#000000" stroke="none">
            <path d="M5142 12785 c-19 -8 -91 -71 -160 -140 l-127 -125 96 -94 c200 -193
            269 -211 390 -98 62 57 189 207 189 222 0 13 -169 167 -226 206 -60 41 -114
            51 -162 29z"/>
            <path d="M3952 11662 c-109 -39 -166 -131 -166 -268 0 -72 4 -90 32 -147 20
            -40 32 -80 32 -104 0 -135 119 -266 254 -280 187 -19 332 170 282 368 -9 35
            -25 75 -35 89 -10 15 -20 51 -23 86 -10 110 -67 202 -151 246 -57 29 -159 33
            -225 10z"/>
            <path d="M1865 11614 c-504 -77 -923 -278 -1195 -571 -323 -349 -437 -818
            -328 -1348 11 -54 28 -124 38 -155 l18 -55 1 65 c3 155 45 419 96 596 143 494
            455 856 855 993 146 50 243 65 442 65 l188 1 0 91 c0 50 3 146 7 212 7 141 21
            128 -122 106z"/>
            <path d="M9078 11585 c-515 -71 -918 -386 -1132 -885 -43 -102 -116 -325 -116
            -357 0 -8 53 60 118 153 179 258 257 358 351 453 240 244 498 345 876 344 330
            0 584 -76 856 -256 l27 -18 111 175 c61 97 111 179 111 183 0 19 -290 120
            -465 163 -238 58 -515 75 -737 45z"/>
            <path d="M6560 10848 c-25 -13 -100 -76 -169 -143 l-123 -120 168 -162 169
            -162 24 22 c12 12 91 94 175 181 l151 159 -100 94 c-105 100 -183 153 -225
            153 -14 0 -45 -10 -70 -22z"/>
            <path d="M8575 10479 c-279 -35 -480 -161 -591 -372 -38 -73 -41 -102 -4 -43
            85 138 325 212 603 186 539 -51 1027 -356 1054 -658 5 -49 9 -60 22 -56 9 2
            -16 -11 -55 -31 -131 -63 -314 -105 -461 -105 -64 0 -69 2 -158 60 -202 131
            -400 193 -617 193 l-107 0 -80 63 c-181 145 -303 334 -345 535 -15 68 -17 67
            -41 -26 -53 -204 -16 -433 100 -609 25 -38 45 -72 45 -77 0 -4 -8 -10 -17 -14
            -10 -3 -34 -19 -53 -36 -35 -30 -35 -30 -5 -16 17 8 46 19 65 26 35 11 36 10
            104 -54 138 -133 302 -228 507 -296 119 -39 285 -69 382 -69 55 0 56 0 112
            -62 68 -75 149 -192 178 -257 50 -115 62 -252 28 -328 -11 -23 -17 -44 -13
            -47 3 -3 -44 -6 -105 -6 -445 0 -931 260 -1184 632 -134 197 -194 446 -156
            653 8 44 13 81 12 83 -5 5 -104 -137 -126 -180 -64 -125 -93 -307 -70 -443 77
            -458 530 -881 1045 -980 101 -19 277 -19 372 1 71 14 84 21 222 124 179 132
            236 187 256 248 37 107 4 297 -82 475 -27 56 -56 111 -65 122 -14 18 -10 21
            77 65 114 56 171 100 198 154 11 22 64 104 117 181 l96 140 0 85 c0 71 -4 94
            -27 142 -57 122 -182 273 -301 365 -225 173 -617 271 -932 232z"/>
            <path d="M10039 10347 c-51 -35 -71 -97 -72 -237 -2 -129 10 -165 62 -196 27
            -16 29 -22 33 -85 4 -72 20 -105 70 -142 36 -27 134 -33 289 -17 l127 12 6 92
            c3 50 8 153 11 229 l6 137 -51 0 -50 0 0 108 0 109 -97 6 c-54 4 -143 7 -199
            7 -89 0 -105 -3 -135 -23z"/>
            <path d="M1565 10249 c-452 -70 -801 -352 -894 -722 -22 -88 -35 -185 -20
            -147 76 188 198 305 431 415 221 104 451 155 698 155 267 0 451 -67 553 -200
            29 -37 32 -39 49 -23 10 9 18 12 18 7 0 -17 -88 -154 -133 -207 -49 -59 -162
            -151 -240 -196 l-55 -31 -103 11 c-220 22 -465 -23 -648 -122 l-74 -40 -76 11
            c-270 41 -498 138 -638 273 -52 50 -54 37 -10 -63 43 -98 97 -179 176 -263 63
            -66 204 -169 269 -196 17 -7 32 -17 32 -21 0 -4 -16 -40 -35 -79 -45 -90 -44
            -97 3 -31 20 29 49 62 63 73 27 19 27 19 90 -1 62 -20 126 -35 201 -47 73 -11
            290 -6 385 11 125 21 225 54 342 111 l93 46 57 -18 c87 -27 216 -90 286 -140
            105 -74 171 -171 182 -265 5 -46 7 -49 27 -39 37 18 -50 -55 -107 -89 -127
            -77 -289 -131 -455 -153 -125 -17 -401 -6 -524 20 -387 83 -690 301 -810 581
            -15 36 -28 73 -28 83 0 9 -4 17 -9 17 -22 0 -27 -207 -7 -312 49 -253 207
            -453 458 -579 196 -99 377 -140 618 -140 278 0 507 64 705 196 111 74 136 105
            169 203 15 46 55 142 88 214 55 118 60 134 54 176 -20 146 -165 303 -430 467
            -15 9 -12 16 20 60 20 28 52 83 72 123 l35 74 3 241 c4 227 3 243 -17 284 -45
            93 -200 191 -394 249 -78 23 -111 27 -250 30 -88 1 -187 -1 -220 -7z"/>
            <path d="M5870 9454 c-14 -2 -63 -9 -110 -15 -191 -25 -408 -81 -574 -149
            -628 -255 -1025 -765 -1122 -1439 -21 -140 -23 -443 -5 -581 16 -120 61 -352
            70 -363 4 -4 16 68 25 160 63 611 79 716 136 885 104 309 311 546 665 761 255
            155 386 200 739 256 136 22 175 38 210 84 19 26 21 44 24 218 4 208 9 192 -58
            183z"/>
            <path d="M3382 9401 c-70 -24 -126 -80 -153 -150 -11 -30 -28 -66 -38 -80 -52
            -77 -61 -198 -21 -289 63 -144 240 -202 381 -125 54 29 113 97 124 143 3 14
            18 42 32 62 38 56 52 105 52 183 1 113 -52 205 -142 250 -63 31 -156 33 -235
            6z"/>
            <path d="M7513 9093 c-110 -185 -177 -356 -220 -562 -24 -112 -27 -148 -27
            -326 0 -147 5 -227 18 -300 68 -386 230 -728 497 -1050 36 -44 155 -175 265
            -290 347 -367 432 -472 523 -651 88 -173 117 -306 108 -502 -6 -126 -31 -250
            -72 -346 -9 -21 -15 -39 -13 -41 2 -1 83 122 180 274 l177 276 11 106 c21 198
            -18 393 -117 581 -81 154 -190 285 -488 588 -383 390 -506 548 -646 835 -146
            298 -208 566 -209 903 0 187 11 312 41 466 10 55 17 101 15 103 -2 2 -21 -27
            -43 -64z"/>
            <path d="M741 8228 c-4 -657 364 -1261 984 -1616 177 -101 320 -155 725 -271
            482 -138 655 -207 836 -332 100 -69 228 -207 283 -303 54 -95 106 -244 123
            -351 13 -79 13 -75 19 180 3 143 11 290 18 326 l13 66 -38 74 c-83 166 -172
            281 -297 384 -188 155 -379 234 -882 366 -573 150 -892 316 -1200 624 -225
            225 -390 485 -519 816 -67 171 -65 170 -65 37z"/>
            <path d="M5640 7834 c-245 -35 -388 -77 -550 -158 -307 -155 -509 -414 -605
            -776 -31 -119 -31 -138 0 -77 42 81 79 128 166 212 348 334 1037 544 1454 444
            135 -32 266 -123 315 -220 l23 -44 39 45 38 45 -25 -63 c-70 -172 -228 -357
            -405 -472 l-95 -62 -105 5 c-276 14 -529 -41 -732 -158 -70 -40 -84 -45 -142
            -45 -92 0 -296 37 -412 75 -172 56 -310 133 -413 230 -53 49 -54 49 -47 20 13
            -53 65 -175 102 -237 102 -174 265 -328 433 -409 39 -19 71 -37 71 -42 0 -4
            -14 -33 -32 -65 l-32 -57 52 57 c51 54 54 56 85 46 126 -38 154 -42 332 -42
            150 0 192 4 255 21 123 34 356 121 495 186 79 36 142 59 160 58 17 -1 71 -12
            122 -26 334 -88 530 -249 550 -452 3 -32 10 -61 14 -64 10 -6 -151 -115 -226
            -152 -241 -120 -589 -183 -872 -157 -482 43 -856 237 -1069 557 -38 57 -104
            190 -104 210 0 7 -4 13 -10 13 -16 0 -12 -212 6 -298 81 -394 451 -728 948
            -857 497 -128 975 -20 1226 278 70 83 122 180 219 411 63 149 71 176 71 232 0
            156 -118 314 -350 469 -53 36 -117 74 -143 85 -26 12 -47 23 -47 27 0 3 14 22
            30 43 49 61 90 162 106 257 10 59 16 167 17 323 1 269 -1 279 -91 365 -56 54
            -230 143 -342 174 -156 43 -359 62 -480 45z"/>
            <path d="M9938 7716 c-138 -30 -213 -123 -211 -262 1 -58 7 -87 31 -141 21
            -46 32 -90 35 -134 10 -155 121 -259 275 -259 77 0 126 17 178 63 108 95 131
            260 53 382 -16 26 -29 60 -29 78 0 78 -45 179 -100 225 -55 47 -149 67 -232
            48z"/>
            <path d="M11030 6695 c-8 -2 -49 -9 -90 -15 -306 -50 -635 -247 -867 -521 -66
            -78 -193 -253 -193 -265 0 -3 21 12 48 34 256 212 607 387 913 453 133 29 383
            37 505 15 318 -55 603 -231 799 -495 33 -44 64 -80 68 -81 5 0 80 61 168 135
            l159 136 -73 65 c-281 254 -638 444 -965 515 -72 15 -144 21 -277 24 -99 2
            -187 2 -195 0z"/>
            <path d="M284 6435 c-31 -15 -93 -68 -167 -143 l-118 -119 83 -78 c223 -211
            281 -226 409 -107 60 55 189 206 189 221 0 15 -213 198 -261 224 -63 33 -72
            33 -135 2z"/>
            <path d="M1490 5973 c-340 -345 -534 -692 -623 -1113 -19 -91 -22 -135 -22
            -330 1 -196 4 -239 23 -330 103 -473 391 -907 807 -1216 l39 -29 -23 40 c-13
            22 -93 151 -178 287 -194 313 -259 430 -312 562 -66 166 -85 264 -84 441 0
            180 14 244 118 521 147 392 220 508 426 675 116 93 162 145 178 199 14 48 2
            102 -36 164 -45 73 -177 246 -187 246 -5 0 -62 -53 -126 -117z"/>
            <path d="M3113 5989 c-34 -17 -283 -232 -283 -244 0 -2 24 -27 54 -55 l55 -52
            -36 -46 c-86 -112 -73 -155 98 -336 l111 -117 167 172 c91 94 170 178 175 186
            6 11 -6 30 -45 69 l-54 55 78 77 79 76 -44 38 c-159 140 -244 197 -293 198
            -11 0 -39 -9 -62 -21z"/>
            <path d="M9814 5823 c-91 -148 -119 -249 -118 -423 0 -114 8 -168 39 -271 4
            -11 -8 -18 -47 -28 -70 -18 -96 -34 -42 -26 23 4 57 3 76 0 31 -6 38 -14 67
            -76 125 -269 400 -528 686 -645 94 -39 100 -46 149 -194 75 -226 63 -413 -33
            -523 l-32 -36 33 -16 c33 -15 33 -15 -29 -10 -138 13 -305 80 -435 176 -36 27
            -105 90 -151 139 -280 294 -447 768 -408 1158 10 95 39 223 67 297 17 44 -105
            -71 -186 -175 -129 -167 -195 -413 -170 -638 59 -535 481 -997 993 -1086 l86
            -15 64 29 c35 16 129 49 209 73 173 53 181 57 218 109 71 98 102 277 81 465
            -6 60 -14 120 -18 136 -5 26 -4 27 35 27 48 0 159 22 221 45 27 9 69 39 105
            73 34 32 105 93 159 136 149 118 173 167 164 330 -8 148 -62 294 -152 414 -70
            93 -243 252 -355 326 -215 144 -409 207 -630 207 -134 0 -235 -22 -348 -76
            -62 -29 -192 -111 -192 -121 0 -2 24 8 53 21 267 122 742 -53 1097 -405 157
            -155 250 -306 280 -455 13 -62 8 -162 -10 -195 -9 -16 -6 -19 18 -22 47 -6
            -72 -30 -181 -35 -111 -6 -215 7 -330 44 l-77 24 -64 87 c-147 200 -387 380
            -566 425 -18 4 -40 31 -77 89 -131 211 -187 379 -201 601 l-7 108 -41 -68z"/>
            <path d="M4590 5441 c0 -376 115 -746 337 -1086 281 -428 721 -769 1193 -924
            69 -23 295 -84 502 -136 543 -137 709 -190 921 -296 372 -187 584 -462 651
            -844 13 -76 14 -58 15 309 l1 389 -51 97 c-135 257 -327 440 -601 570 -171 81
            -338 129 -793 230 -126 28 -273 62 -325 76 -860 228 -1451 752 -1784 1582 -25
            63 -46 120 -46 127 0 8 -4 17 -10 20 -6 4 -10 -36 -10 -114z"/>
            <path d="M7715 5042 c-36 -17 -295 -245 -295 -260 0 -4 23 -29 51 -58 l50 -51
            -30 -48 c-41 -65 -46 -95 -23 -147 20 -46 225 -278 245 -278 7 0 89 80 184
            178 l171 179 -50 51 -51 50 66 75 67 74 -100 97 c-155 148 -208 174 -285 138z"/>
            <path d="M2933 4915 c-400 -91 -728 -353 -926 -742 -198 -389 -193 -781 14
            -1119 52 -84 85 -124 55 -66 -9 17 -23 59 -31 94 -90 383 261 1091 704 1417
            139 102 286 160 406 161 49 0 152 -26 182 -46 29 -18 31 -18 35 9 10 54 20
            -107 15 -226 -6 -143 -20 -220 -68 -370 l-31 -97 -86 -58 c-107 -71 -283 -243
            -345 -339 -64 -98 -122 -214 -143 -285 -17 -55 -22 -61 -79 -97 -95 -60 -237
            -129 -333 -161 -146 -48 -247 -62 -418 -59 l-151 4 34 -23 c60 -41 195 -101
            278 -124 141 -38 468 -29 588 17 15 6 17 0 18 -46 0 -30 4 -72 8 -94 l9 -40 1
            44 c0 25 8 70 17 101 16 56 16 57 70 74 78 25 235 105 334 172 246 164 417
            357 531 598 l49 104 92 31 c144 47 215 61 324 61 74 0 119 -5 165 -20 73 -22
            98 -37 162 -97 l46 -43 -26 -77 c-175 -529 -728 -980 -1308 -1069 -140 -22
            -328 -14 -456 19 -99 26 -226 79 -280 117 -16 12 -32 20 -35 18 -10 -10 83
            -136 147 -199 240 -239 587 -327 982 -248 310 62 602 221 818 445 193 201 299
            425 315 669 6 87 5 97 -55 325 -34 129 -69 252 -78 273 -33 75 -116 131 -250
            169 -65 18 -105 22 -243 22 -91 1 -190 -2 -221 -6 l-57 -8 -7 48 c-10 71 -61
            221 -94 277 -16 28 -92 140 -168 250 -170 244 -177 249 -343 252 -61 1 -131
            -4 -167 -12z"/>
            <path d="M9154 4811 c-432 -368 -663 -943 -615 -1534 27 -336 86 -527 320
            -1029 195 -420 255 -595 281 -830 30 -259 -69 -550 -253 -746 -58 -61 -16 -32
            96 66 146 128 251 211 328 258 53 33 66 47 87 94 132 297 139 593 20 920 -46
            129 -75 193 -206 465 -66 138 -138 295 -160 350 -210 527 -231 1019 -66 1512
            48 144 144 355 213 467 23 37 41 70 39 72 -2 2 -40 -27 -84 -65z"/>
            <path d="M9228 3621 c-55 -3 -102 -11 -109 -18 -17 -17 -18 -429 -1 -459 7
            -13 26 -24 46 -28 32 -6 34 -10 40 -54 4 -26 14 -71 22 -101 l15 -53 227 4
            c125 3 234 8 243 12 12 5 17 41 26 184 11 177 9 247 -9 268 -5 7 -24 15 -43
            18 l-35 7 0 68 c0 95 -9 131 -34 140 -30 12 -274 19 -388 12z"/>
            <path d="M2034 2328 c-66 -68 -128 -141 -138 -162 -23 -49 -17 -112 14 -156
            l23 -32 -69 -70 -69 -70 65 -59 c158 -146 257 -200 328 -180 69 20 148 90 246
            216 l46 60 -57 57 -56 56 31 39 c16 21 44 51 61 68 l32 29 -163 163 c-90 90
            -166 163 -169 163 -3 0 -60 -55 -125 -122z"/>
            <path d="M6580 2341 c-255 -49 -460 -125 -895 -331 -386 -183 -640 -269 -935
            -315 -143 -22 -448 -31 -580 -16 -231 26 -435 74 -645 152 -178 66 -456 207
            -620 315 -29 18 -28 17 13 -42 264 -377 746 -686 1246 -798 181 -41 322 -56
            525 -56 194 0 332 14 488 49 51 12 94 21 97 21 2 0 6 -24 9 -52 7 -56 26 -89
            70 -122 35 -26 150 -32 300 -16 l115 12 6 30 c3 17 6 83 7 147 0 64 4 135 7
            159 l7 43 130 55 c438 187 677 260 930 285 333 32 667 -77 958 -314 31 -26 57
            -45 57 -43 0 2 -36 55 -80 118 -359 507 -492 631 -763 709 -104 30 -319 35
            -447 10z"/>
            <path d="M10769 2313 c-51 -8 -132 -66 -164 -117 -28 -46 -30 -57 -30 -140 0
            -83 3 -96 33 -154 21 -42 32 -77 32 -105 0 -178 157 -312 326 -277 134 28 215
            125 222 267 4 78 -7 124 -42 176 -15 21 -25 56 -29 96 -17 162 -119 263 -262
            259 -33 0 -72 -3 -86 -5z"/>
            <path d="M6814 1136 c-132 -33 -204 -128 -204 -272 0 -37 8 -85 19 -116 11
            -29 21 -85 24 -123 8 -127 92 -249 191 -276 83 -22 191 4 262 64 73 61 108
            223 69 319 -11 28 -17 75 -18 133 -2 79 -6 96 -31 143 -59 107 -187 159 -312
            128z"/>
            <path d="M9990 710 c-44 -11 -85 -57 -101 -112 -7 -24 -12 -92 -13 -153 -1
            -97 2 -114 21 -146 12 -19 34 -41 48 -49 22 -12 25 -20 25 -69 0 -100 52 -163
            147 -177 25 -4 113 -1 194 6 l147 14 6 110 c3 61 7 164 10 229 l4 117 -31 0
            c-73 0 -73 0 -69 115 l4 104 -33 5 c-64 10 -324 14 -359 6z"/>
            </g>
            </svg>

          </div>
          <div class="col">
            <b>Congratulations!</b>
            <p>{{sc.cat_name.name}} is cured!
            If {{sc.cat_name.name}} relapses, please update your <a href="/catinfo/?CatID={{sc.cat_name.id}}&cured=True">cat's profile</a>.
          </div>
        </div>
      </div>
      {% else %}

      <div class="alert alert-warning">
        <div class="row">
          <div class="col-sm-2">
            <svg width="4em" height="4em" viewBox="0 0 16 16" class="bi bi-trophy" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M2.5.5A.5.5 0 0 1 3 0h10a.5.5 0 0 1 .5.5c0 .538-.012 1.05-.034 1.536a3 3 0 1 1-1.133 5.89c-.79 1.865-1.878 2.777-2.833 3.011v2.173l1.425.356c.194.048.377.135.537.255L13.3 15.1a.5.5 0 0 1-.3.9H3a.5.5 0 0 1-.3-.9l1.838-1.379c.16-.12.343-.207.537-.255L6.5 13.11v-2.173c-.955-.234-2.043-1.146-2.833-3.012a3 3 0 1 1-1.132-5.89A33.076 33.076 0 0 1 2.5.5zm.099 2.54a2 2 0 0 0 .72 3.935c-.333-1.05-.588-2.346-.72-3.935zm10.083 3.935a2 2 0 0 0 .72-3.935c-.133 1.59-.388 2.885-.72 3.935zM3.504 1c.007.517.026 1.006.056 1.469.13 2.028.457 3.546.87 4.667C5.294 9.48 6.484 10 7 10a.5.5 0 0 1 .5.5v2.61a1 1 0 0 1-.757.97l-1.426.356a.5.5 0 0 0-.179.085L4.5 15h7l-.638-.479a.501.501 0 0 0-.18-.085l-1.425-.356a1 1 0 0 1-.757-.97V10.5A.5.5 0 0 1 9 10c.516 0 1.706-.52 2.57-2.864.413-1.12.74-2.64.87-4.667.03-.463.049-.952.056-1.469H3.504z"/>
            </svg>
          </div>
          <div class="col">

            You are passed the 84 day observation period.  Is your cat cured? Please update your <a href="/catinfo/?CatID={{sc.cat_name.id}}&cured=True">cat's profile</a>.
          </div>
        </div>
      </div>
    {% endif %}
    {% else %}
    {% if treatment_duration >= 84|add:sc.cat_name.extended_treatment %}
    <div class="alert alert-warning">
      {% with treatment_duration|add:-83|subtract:sc.cat_name.extended_treatment as treatment_dur %}

        <div class="row">
          <div class="col">
            <div id="observation_progress" class="progress mb-3">
              <div class="progress-bar bg-danger" role="progressbar" style="width:{{treatment_dur|duration_progress}}%" aria-valuenow="{{treatment_dur|duration_progress}}%" aria-valuemin="0" aria-valuemax="100">{{treatment_dur|duration_progress}}% done with observation period</div>
            </div>
          </div>
        </div>

      <div class="row">
        <div class="col-sm-2">
          {% if treatment_duration >= 167 %}
            <svg width="4em" height="4em" viewBox="0 0 16 16" class="bi bi-trophy" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M2.5.5A.5.5 0 0 1 3 0h10a.5.5 0 0 1 .5.5c0 .538-.012 1.05-.034 1.536a3 3 0 1 1-1.133 5.89c-.79 1.865-1.878 2.777-2.833 3.011v2.173l1.425.356c.194.048.377.135.537.255L13.3 15.1a.5.5 0 0 1-.3.9H3a.5.5 0 0 1-.3-.9l1.838-1.379c.16-.12.343-.207.537-.255L6.5 13.11v-2.173c-.955-.234-2.043-1.146-2.833-3.012a3 3 0 1 1-1.132-5.89A33.076 33.076 0 0 1 2.5.5zm.099 2.54a2 2 0 0 0 .72 3.935c-.333-1.05-.588-2.346-.72-3.935zm10.083 3.935a2 2 0 0 0 .72-3.935c-.133 1.59-.388 2.885-.72 3.935zM3.504 1c.007.517.026 1.006.056 1.469.13 2.028.457 3.546.87 4.667C5.294 9.48 6.484 10 7 10a.5.5 0 0 1 .5.5v2.61a1 1 0 0 1-.757.97l-1.426.356a.5.5 0 0 0-.179.085L4.5 15h7l-.638-.479a.501.501 0 0 0-.18-.085l-1.425-.356a1 1 0 0 1-.757-.97V10.5A.5.5 0 0 1 9 10c.516 0 1.706-.52 2.57-2.864.413-1.12.74-2.64.87-4.667.03-.463.049-.952.056-1.469H3.504z"/>
            </svg>
          {% else %}
          <img src="https://img.icons8.com/pastel-glyph/64/000000/cat--v1.png"/>
          {% endif %}
        </div>
        <div class="col">
          <p>You are now on day {{treatment_dur}} of the 84 day observation period. If your cat experiences a relapse, please update your <a href="/catinfo/?CatID={{sc.cat_name.id}}">cat's profile</a>.
          {% if treatment_duration >= 167 %}
          <p>This is your last day!  Please check back tomorrow to indicate that your cat has been cured!</p>
          {% endif %}

        </div>
      </div>
    {% endwith %}
    </div>
    {% endif %}
    {% endif %}

    <div class="modal fade alert-danger" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Have you checked your cat's weight?</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true"></span>
            </button>
          </div>
          <div class="modal-body">
             It is important to re-weigh your cat so that you are giving them the correct amount of GS.  Please check with your admin for more information.
            <br><br><font class="small">You are seeing this message because your cat's weight on the treatment log does not appear to have changed recently.</font>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>


    <div class="jumbotron container-fluid">

      {% if grouping %}
      <div class="alert alert-warning">
        Member of Group: {{grouping}}
      </div>
      {% endif %}
      <div class="alert alert-primary">
        Please update your <a href="/catinfo/?CatID={{sc.cat_name.id}}">cat's information</a> if a relapse occurs
      </div>

      <div class="card-deck">
        <div class="row">
        {% if treatment_duration >= 84|add:sc.cat_name.extended_treatment %}

        <div class="col-sm-6 mb-3">
          <div class="card bg-light" style="width: 18rem;">
            <div class="card-header">
              <h5 class="card-title">
                <svg class="bi bi-pencil-square" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                  <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                </svg>
                <span>Add Observations</span>
              </h5>
            </div>
            <div class="card-body">

              <p class="card-text">The observation period can be stressful.  It is often useful to record weight and temperature, as well as general daily behaviors so you can see patterns in how your cat is doing.</p>
              <a class="btn btn-success" href="/record_observation" role="button">Record an Observation</a>
            </div>
          </div>
        </div>


          <div class="col-sm-6 mb-3">
            <div class="card bg-light" style="width: 18rem;"">
              <div class="card-header">
                <h5 class="card-title">
                  <svg class="bi bi-calendar3-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2H0z"/>
                    <path fill-rule="evenodd" d="M0 3h16v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm6.5 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-8 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-8 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                  </svg>
                  <span>View Observation Log</span>
                </h5>
              </div>
              <div class="card-body">
                <p class="card-text">See past data so you know how your cat has been doing.</p>
                <a class="btn btn-success" href="/observationlog" role="button">View Observation Log</a>
              </div>
            </div>
          </div>

        {% endif %}
        {% if treatment_duration <= 90|add:sc.cat_name.extended_treatment %}
          <div class="col-sm-6 mb-3">
            <div class="card bg-light" style="width: 18rem;">
              <div class="card-header">
                <h5 class="card-title">
                  <svg class="bi bi-pencil-square" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                    <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                  </svg>
                  <span>Add to Log</span>
                </h5>
              </div>
              <div class="card-body">

                <p class="card-text">Log your medication so you can monitor your cat over time.  Calculator populates with last-used weight and dose information</p>
                <a class="btn btn-success" href="/inject" role="button">Record Medication</a>
              </div>
            </div>
          </div>
          {% endif %}

          <div class="col-sm-6 mb-3">
            <div class="card bg-light" style="width: 18rem;"">
              <div class="card-header">
                <h5 class="card-title">
                  <svg class="bi bi-calendar3-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2H0z"/>
                    <path fill-rule="evenodd" d="M0 3h16v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm6.5 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-8 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-8 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                  </svg>
                  <span>View Treatment Log</span>
                </h5>
              </div>
              <div class="card-body">
                <p class="card-text">See past data so you know how your cat has been doing.</p>
                <a class="btn btn-success" href="/log" role="button">View Treatment Log</a>
              </div>
            </div>
          </div>

          <div class="col-sm-6 mb-3">
            <div class="card bg-light" style="width: 18rem;"">
              <div class="card-header">
                <h5 class=card-title">
                  <svg class="bi bi-gear" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M8.837 1.626c-.246-.835-1.428-.835-1.674 0l-.094.319A1.873 1.873 0 0 1 4.377 3.06l-.292-.16c-.764-.415-1.6.42-1.184 1.185l.159.292a1.873 1.873 0 0 1-1.115 2.692l-.319.094c-.835.246-.835 1.428 0 1.674l.319.094a1.873 1.873 0 0 1 1.115 2.693l-.16.291c-.415.764.42 1.6 1.185 1.184l.292-.159a1.873 1.873 0 0 1 2.692 1.116l.094.318c.246.835 1.428.835 1.674 0l.094-.319a1.873 1.873 0 0 1 2.693-1.115l.291.16c.764.415 1.6-.42 1.184-1.185l-.159-.291a1.873 1.873 0 0 1 1.116-2.693l.318-.094c.835-.246.835-1.428 0-1.674l-.319-.094a1.873 1.873 0 0 1-1.115-2.692l.16-.292c.415-.764-.42-1.6-1.185-1.184l-.291.159A1.873 1.873 0 0 1 8.93 1.945l-.094-.319zm-2.633-.283c.527-1.79 3.065-1.79 3.592 0l.094.319a.873.873 0 0 0 1.255.52l.292-.16c1.64-.892 3.434.901 2.54 2.541l-.159.292a.873.873 0 0 0 .52 1.255l.319.094c1.79.527 1.79 3.065 0 3.592l-.319.094a.873.873 0 0 0-.52 1.255l.16.292c.893 1.64-.902 3.434-2.541 2.54l-.292-.159a.873.873 0 0 0-1.255.52l-.094.319c-.527 1.79-3.065 1.79-3.592 0l-.094-.319a.873.873 0 0 0-1.255-.52l-.292.16c-1.64.893-3.433-.902-2.54-2.541l.159-.292a.873.873 0 0 0-.52-1.255l-.319-.094c-1.79-.527-1.79-3.065 0-3.592l.319-.094a.873.873 0 0 0 .52-1.255l-.16-.292c-.892-1.64.902-3.433 2.541-2.54l.292.159a.873.873 0 0 0 1.255-.52l.094-.319z"/>
                    <path fill-rule="evenodd" d="M8 5.754a2.246 2.246 0 1 0 0 4.492 2.246 2.246 0 0 0 0-4.492zM4.754 8a3.246 3.246 0 1 1 6.492 0 3.246 3.246 0 0 1-6.492 0z"/>
                  </svg>
                  <span>Calculator</span>
                </h5>
              </div>
              <div class="card-body">
                <p class="card-text">Used to determine the volume of GS needed for an injection</p>
                <a class="btn btn-dark" href="/calculate" role="button">Calculate Dose</a>
              </div>
            </div>
          </div>

          <div class="col-sm-6 mb-3">
            <div class="card bg-light" style="width: 18rem;"">
              <div class="card-header">
                <h5 class=card-title">
                  <svg class="bi bi-people" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.995-.944v-.002.002zM7.022 13h7.956a.274.274 0 0 0 .014-.002l.008-.002c-.002-.264-.167-1.03-.76-1.72C13.688 10.629 12.718 10 11 10c-1.717 0-2.687.63-3.24 1.276-.593.69-.759 1.457-.76 1.72a1.05 1.05 0 0 0 .022.004zm7.973.056v-.002.002zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10c-1.668.02-2.615.64-3.16 1.276C1.163 11.97 1 12.739 1 13h3c0-1.045.323-2.086.92-3zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
                  </svg>
                  <span>Track Other Warriors</span>
                </h5>
              </div>
              <div class="card-body">
                <p class="card-text">If another warrior gives you their share link, you can track their cat information and injection log.</p>
                <a class="btn btn-warning" href="/trackwarrior" role="button">Track Others</a>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
{% endif %}
{% if brand_plot != None%}
<div class="countainer">

  {% autoescape off %}

  <p>How {{sc.cat_name.name}} appears to be doing through treatment compared to other cats</p>
  {{brand_plot}}
  {% endautoescape %}

</div>
  {% endif %}
  </div> <!-- /container -->
</main>



<script type="text/javascript">
var tp = document.getElementById('treatment_progress');
var ip = document.getElementById('injection_progress');
var op = document.getElementById('observation_progress');
var badge = document.getElementById('badge_progress');

{% if sc.cat_name.cured == True %}
var success = document.getElementById('success');
var suc_clone = success.cloneNode(true);
var badge_success = document.getElementById('badge_success_div')
suc_clone.id = "badge_success"
badge_success.appendChild(suc_clone)
{% endif %}

if (ip !=null){
  var ip_clone = ip.cloneNode(true);
  ip_clone.id = "badge_injection";
  badge.appendChild(ip_clone);
}


if (tp !=null)
{
  var tp_clone = tp.cloneNode(true);
  tp_clone.id = "badge_treatment";
  badge.appendChild(tp_clone);
}


if(op!=null)
{
  var op_clone = op.cloneNode(true);
  op_clone.id = "badge_observation";
  badge.appendChild(op_clone);
}



var rand = Math.floor(Math.random() * 1001).toString();
document.getElementById("download").addEventListener("click", function() {

    html2canvas(document.querySelector('#capture')).then(function(canvas) {

        console.log(canvas);
        saveAs(canvas.toDataURL(), "{% now 'Ymd' %}_".concat("{{sc.cat_name.name}}_",rand,".png"));
    });
});



function saveAs(uri, filename) {

    var link = document.createElement('a');

    if (typeof link.download === 'string') {

        link.href = uri;
        link.download = filename;

        //Firefox requires the link to be in the body
        document.body.appendChild(link);

        //simulate click
        link.click();

        //remove the link when done
        document.body.removeChild(link);

    } else {

        window.open(uri);

    }
};
</script>

{% if wt_array|length >= 4 %}
  {% if wt_array.0 == wt_array.3 %}

<script type="text/javascript">
    $(window).on('load', function() {
        $('#myModal').modal('show');
    });
</script>
  {% endif %}
{% endif %}

{% endblock %}
